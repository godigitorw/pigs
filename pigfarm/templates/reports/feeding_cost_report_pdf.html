<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Feeding Cost Report</title>
    <style>
      body {
        font-family: sans-serif;
        font-size: 12px;
        margin: 30px;
      }
      h1,
      h2 {
        color: #333;
        margin-bottom: 10px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 6px 10px;
        text-align: left;
      }
      th {
        background: #ffeeba;
        color: #333;
      }
      .meta {
        font-size: 11px;
        color: #555;
        margin-bottom: 10px;
      }
      .right {
        text-align: right;
      }
    </style>
  </head>
  <body>
    <h1>{{ system_name }}</h1>

    <div class="meta">
      <strong>Generated at:</strong> {{ generated_at|date:"Y-m-d H:i:s" }}<br />
      <strong>User:</strong>
      {% if user %} {{ user.username }} {% else %} Anonymous {% endif %}
    </div>

    <h2>Feeding Cost Report</h2>

    {% if start_date and end_date %}
    <p>
      Period:
      <strong>{{ start_date|date:"Y-m-d" }}</strong>
      to
      <strong>{{ end_date|date:"Y-m-d" }}</strong>
    </p>
    {% endif %}

    <table>
      <thead>
        <tr>
          <th>Pig Type</th>
          <th>Name</th>
          <th>Animal Tag ID</th>
          <th>Date</th>
          <th>Feed Name</th>
          <th>Quantity</th>
          <th>Total Cost (RWF)</th>
        </tr>
      </thead>
      <tbody>
        {% for rec in records %}
        <tr>
          <td>{{ rec.pig_type }}</td>
          <td>{{ rec.name }}</td>
          <td>{{ rec.tag|default:"-" }}</td>
          <td>{{ rec.date|date:"Y-m-d" }}</td>
          <td>{{ rec.feed_name }}</td>
          <td class="right">{{ rec.quantity|floatformat:2 }}</td>
          <td class="right">{{ rec.total_cost|floatformat:0|intcomma }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="7">No feeding records found in this period.</td>
        </tr>
        {% endfor %} {% if records %}
        <tr>
          <td colspan="6" class="right">
            <strong>Total Feeding Cost:</strong>
          </td>
          <td class="right">{{ total_cost|floatformat:0|intcomma }} RWF</td>
        </tr>
        {% endif %}
      </tbody>
    </table>
  </body>
</html>
